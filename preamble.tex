\documentclass[hidelinks,12pt,norsk,a4paper,fleqn]{scrartcl}

% Technical
\usepackage[T1]{fontenc}
\usepackage{comment}

% Layout
\usepackage[table]{xcolor}
\usepackage[textsize=scriptsize]{todonotes}
\usepackage{enumitem}
\usepackage{url}
\usepackage{siunitx}
\sisetup{output-decimal-marker = {,}}
\sisetup{exponent-product=\cdot}
\DeclareSIUnit{\molar}{M}


% Tables
\usepackage{booktabs}
\usepackage{tabularx}

% Typography
\usepackage{microtype}

% Localization
\usepackage{babel}
\usepackage{isodate}
%\usepackage{icomma}

% Drawings
%\usepackage{tikz}
%\usetikzlibrary{calc}
%\usetikzlibrary{positioning}
%\usetikzlibrary{tikzmark}
%\usetikzlibrary{backgrounds}
%\newcommand{\mathtikzmark}[2]{\tikz[baseline={(#1.base)},remember picture] \node (#1) {\ensuremath{#2}};}

% Figures
\usepackage{floatrow}
\floatsetup[table]{capposition=top}
\usepackage{flafter}
\usepackage{pgfplots}
\pgfplotsset{compat=1.16}
\usepackage{pgfplotstable}

% Code
%\usepackage{minted}    
%\floatsetup[listing]{style=Plaintop}
%\AtBeginEnvironment{listing}{\setcounter{listing}{\value{lstlisting}}}
%\AtEndEnvironment{listing}{\stepcounter{lstlisting}}

% Chemistry
\usepackage{chemmacros}
\usechemmodule{reactions}

% Citations and references
\usepackage{float}
\usepackage{varioref}
\usepackage{hyperref}
\usepackage[capitalise]{cleveref}
%\usepackage[capitalise,noabbrev]{cleveref}
\usepackage[norefs, nocites]{refcheck}

% Extend refcheck to work with cleveref
\makeatletter
\newcommand{\refcheckize}[1]{%
	\expandafter\let\csname @@\string#1\endcsname#1%
	\expandafter\DeclareRobustCommand\csname relax\string#1\endcsname[1]{%
		\csname @@\string#1\endcsname{##1}\@for\@temp:=##1\do{\wrtusdrf{\@temp}\wrtusdrf{{\@temp}}}}%
	\expandafter\let\expandafter#1\csname relax\string#1\endcsname
}
\newcommand{\refcheckizetwo}[1]{%
	\expandafter\let\csname @@\string#1\endcsname#1%
	\expandafter\DeclareRobustCommand\csname relax\string#1\endcsname[2]{%
		\csname @@\string#1\endcsname{##1}{##2}\wrtusdrf{##1}\wrtusdrf{{##1}}\wrtusdrf{##2}\wrtusdrf{{##2}}}%
	\expandafter\let\expandafter#1\csname relax\string#1\endcsname
}
\makeatother

\refcheckize{\cref}
\refcheckize{\Cref}
\refcheckizetwo{\crefrange}
\refcheckizetwo{\Crefrange}

%\crefformat{footnote}{#2\footnotemark[#1]#3}

% Custom commands
\newcommand{\SE}{\ensuremath{\mathrm{SE}}} % Typeset standard error

% Norwegian translation
% This might crash in future as documentation specifies <lang> <key> <translation>
\DeclareChemTranslation{Reaction}{Norsk}{Reaksjon}